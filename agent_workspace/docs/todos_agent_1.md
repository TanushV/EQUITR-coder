# Todos for Agent 1

## Assigned Tasks
- [ ] Create project directory structure
- [ ] Create `web-server/` root directory
- [ ] Create `public/` subdirectory
- [ ] Create `public/css/` subdirectory
- [ ] Create `public/js/` subdirectory
- [ ] Create `public/images/` subdirectory
- [ ] Create `tests/` subdirectory
- [ ] Create `tests/fixtures/` subdirectory
- [ ] Create initial `server.py` file with basic structure
- [ ] Add shebang line `#!/usr/bin/env python3`
- [ ] Add module docstring
- [ ] Import required modules: `argparse`, `os`, `signal`, `socketserver`, `datetime`, `pathlib`, `http`, `mimetypes`
- [ ] Define constants: `DEFAULT_PORT = 8080`, `DEFAULT_DIR = "./public"`, `BUFFER_SIZE = 8192`
- [ ] Implement CLI argument parser in `server.py`
- [ ] Create `parse_args()` function
- [ ] Add `--port` argument with type=int, default=8080
- [ ] Add `--dir` argument with type=Path, default="./public"
- [ ] Validate port is between 1024-65535
- [ ] Validate directory exists and is readable
- [ ] Create basic WebServer class structure
- [ ] Add `__init__(self, port: int, directory: Path)` method
- [ ] Add `start(self)` method (stub)
- [ ] Add `stop(self)` method (stub)
- [ ] Implement signal handler
- [ ] Create `signal_handler(signum, frame)` function
- [ ] Register SIGINT handler in main()
- [ ] Add global server reference for cleanup
- [ ] Create basic HTTP server with socketserver
- [ ] Create `RequestHandler` class extending `socketserver.BaseRequestHandler`
- [ ] Implement basic `handle()` method that reads from socket
- [ ] Test server starts and accepts connections
- [ ] Implement HTTP request parser
- [ ] Add `parse_request()` method to RequestHandler
- [ ] Parse request line: `METHOD PATH VERSION`
- [ ] Parse headers until empty line
- [ ] Return parsed method, path, and headers
- [ ] Implement router logic
- [ ] In RequestHandler.handle(), call parse_request()
- [ ] Check if method is GET
- [ ] If not GET, call send_error(405)
- [ ] If GET, proceed to file serving
- [ ] Implement basic error responses
- [ ] Create `send_error(self, status: HTTPStatus)` method
- [ ] Generate proper HTTP response with status line
- [ ] Add basic HTML error page
- [ ] Include Content-Type: text/html
- [ ] Include Content-Length
- [ ] Implement path sanitization
- [ ] Create `sanitize_path(self, request_path: str) -> Path` method
- [ ] Reject paths containing `..`
- [ ] Resolve relative paths
- [ ] Ensure final path is within served directory
- [ ] Handle URL decoding for %20 etc.
- [ ] Implement file existence checking
- [ ] Create `get_file_path(self, request_path: str) -> Path` method
- [ ] Check if file exists

## Instructions
- You are Agent 1 of 2
- Complete ALL assigned todos above
- You cannot finish until ALL your todos are marked as completed
- Use the update_todo tool to mark todos as completed when done
- Read the requirements.md and design.md files for context
- Work systematically through each todo
