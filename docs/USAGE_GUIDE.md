# Usage Guide

## TUI (Advanced Only)

- Launch advanced TUI:
  - `equitrcoder tui --mode single`
  - `equitrcoder tui --mode multi`
  - `equitrcoder tui --mode research` (ML research only)

In research mode, the TUI input panel accepts:
- Datasets: comma-separated dataset paths
- Experiments: semicolon-separated pairs of `name:command` (e.g., `baseline:python train.py; aug:python train.py --augment`)

The TUI will run the full researcher flow without blocking prompts, and the final Markdown report is generated by the supervisor model automatically (no dedicated report-writing agent).

## CLI

- Single:
  - `equitrcoder single "Implement feature X" --model moonshot/kimi-k2-0711-preview`
- Multi:
  - `equitrcoder multi "Implement system Y" --supervisor-model moonshot/kimi-k2-0711-preview --worker-model moonshot/kimi-k2-0711-preview --workers 3`
- Research (ML only):
  - `equitrcoder research "Evaluate model on dataset" --supervisor-model moonshot/kimi-k2-0711-preview --worker-model moonshot/kimi-k2-0711-preview --workers 3`
  - Team defaults: `ml_researcher,data_engineer,experiment_runner`
  - Supervisor model outputs `research_report.md` in the session docs folder.

## Programmatic

Use `ResearchTaskConfiguration` for ML research mode with optional non-interactive context:

```python
from equitrcoder.programmatic.interface import EquitrCoder, ResearchTaskConfiguration

coder = EquitrCoder(repo_path=".", mode="research")
config = ResearchTaskConfiguration(
  description="Evaluate ABC on DEF",
  supervisor_model="moonshot/kimi-k2-0711-preview",
  worker_model="moonshot/kimi-k2-0711-preview",
  team=["ml_researcher", "data_engineer", "experiment_runner"],
  research_context={
    "datasets": [{"path": "./data", "description": "local dataset"}],
    "experiments": [
      {"name": "baseline", "command": "python train.py --dataset data"},
      {"name": "variant", "command": "python train.py --dataset data --flag"}
    ]
  }
)
result = await coder.execute_task(config.description, config)
```

See also external programmatic example: `examples/research_programmatic_example.py`.